!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"undefined"!=typeof module&&module.exports?module.exports=t(e):e.oAuth=t(e)}("undefined"!=typeof window?window:this,function(e){var t,o=e.PROJECT_NAME="lppz",n="http://lppz.letwx.com/",i=e.KEY_API_TOKEN=o+"apitoken",r=e.KEY_API_OPENID=o+"authid",a="m_redirect",c=e.OAUTH_URL,u="CHECK_TOKEN_",l=10,s={cfg:function(a,l,s){var f=new Date,s=s||"snsapi_base";i+="_"+a+"_"+[f.getYear(),f.getMonth(),f.getDate()].join(""),r+="_"+a+"_"+[f.getYear(),f.getMonth(),f.getDate()].join(""),c=e.OAUTH_URL=l?n+"oauth/"+o+"test?scope="+s+"&gameid="+a+"&redirect=":n+"oauth/"+o+"?scope="+s+"&gameid="+a+"&redirect=",u+=a,t=localStorage[u]||0},checkToken:function(o,n){var s,f,d=c+encodeURIComponent(e.location.href),p=this.getUrlParam(),g=e.location.href.split("&apiopenid")[0];g=g.split("&apitoken")[0],p.from?(g=g.split("&from")[0],g=g.split("?from")[0],d=c+encodeURIComponent(g)):(s=p.apitoken,f=p.apiopenid),s&&f?(this.setCookie(i,s),this.setCookie(r,f),o&&o(f,s)):this.getCookie(i)&&this.getCookie(r)?o&&o(this.getCookie(r),this.getCookie(i)):(this.setCookie(a,encodeURIComponent(g)),t++,localStorage[u]=t,l>t?setTimeout(function(){e.location.href=d},200):(delete localStorage[u],n&&n()))},getAuthId:function(){return MHJ.getCookie(r)},getAuthToken:function(){return MHJ.getCookie(i)},clear:function(){MHJ.delCookie(i),MHJ.delCookie(r)},getUrlParam:function(t){var o=t,n=0,i=null;for(o||(o=e.location.href);o.indexOf("#")>-1;){n=o.indexOf("#",n+1);var r=o.substr(n);i=r.indexOf("&")>-1?r.indexOf("&"):r.length,o=o.replace(o.substr(n,i),"")}var a=new Object;if(o.indexOf("?")>-1)for(var c=o.substr(o.indexOf("?")+1),u=c.split("&"),l=0;l<u.length;l++){var s=u[l].split("=");a[s[0]]=s[1]}return a},setCookie:function(e,t,o){var n=new Date;n.setDate(n.getDate()+o),document.cookie=e+"="+escape(t)+(null==o?"":";expires="+n.toGMTString())},getCookie:function(e){var t,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(o))?t[2]:null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var o=this.getCookie(e);null!=o&&(document.cookie=e+"="+o+";expires="+t.toGMTString())}};return s});